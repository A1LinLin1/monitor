# Monitor Recorder - 全能型 Windows 活动记录器

**Monitor Recorder** 是一款基于 **C++** 和 **Qt 6** 框架开发的轻量级 Windows 系统监控工具。
它结合了底层 **Windows Hook（钩子）技术** 与现代化的图形用户界面，能够精准地捕捉键盘输入、识别当前活跃窗口，并提供人性化的日志检索功能。

---

## 🌟 核心特性

### ✅ 全系统监控

* 利用底层全局钩子技术
* 跨进程捕获系统范围内的按键和鼠标活动

### ✅ 智能字符转换

* 自动将物理按键映射为可读的 ASCII 字符
* 直观展示输入内容（例如：`Shift + A` 显示为 `A`）

### ✅ 多维度筛选检索

* **窗口筛选**

  * 无需手动输入进程名
  * 系统自动提取已记录的窗口列表供用户勾选过滤
* **时间回溯**

  * 支持按指定时间段精确查询历史操作日志

### ✅ 高性能架构

* **事件分离**

  * 监控逻辑通过 DLL 注入实现
  * 主界面仅负责展示，保障系统稳定性和响应速度
* **低资源占用**

  * 原生 C++ 编写，内存占用极低

### ✅ 高度可定制化

* 支持通过外部 `style.css`（QSS）文件深度定制 UI
* 可自由调整颜色、字体、布局等界面元素

---

## 🏗️ 项目架构

项目采用 **模块化设计**，主要分为以下两个部分：

### 1️⃣ 监控核心（`myhook`）

* 编译生成 `myhook.dll`
* 调用 `SetWindowsHookEx` 接口实现全局钩子
* 通过 **共享内存（Shared Section）** 与主程序通信

### 2️⃣ 管理终端（`recorder_ui`）

* 基于 **Qt 6** 的 GUI 程序
* 负责：

  * 数据实时渲染
  * 日志持久化存储
  * 用户交互逻辑

---

## 📂 目录结构

```
monitor/
├── myhook/           # 底层钩子模块源码 (C++ / WinAPI)
├── recorder_ui/      # Qt 界面模块源码 (C++ / Qt6)
├── style.css         # UI 样式表文件 (QSS)
├── CMakeLists.txt    # 项目构建配置文件
├── clean_build.bat   # 编译环境清理脚本
└── .gitignore        # Git 忽略文件
```

---

## 🛠️ 构建与安装

### 环境要求

* **操作系统**：Windows 10 / 11（x64）
* **编译器**：MSVC 2019 / 2022
* **框架**：Qt 6.5.0 或更高版本
* **构建工具**：CMake 3.20+

---

### 编译步骤

#### 1️⃣ 克隆仓库

```bash
git clone https://github.com/A1LinLin1/monitor.git
cd monitor
```

#### 2️⃣ 使用 CMake 构建

```bash
mkdir build && cd build
# 请将路径替换为你本地的 Qt 安装路径
cmake .. -DCMAKE_PREFIX_PATH="C:/Qt/6.5.0/msvc2019_64"
cmake --build . --config Release
```

#### 3️⃣ 运行程序

* 确保生成的 `myhook.dll` 与 `recorder_ui.exe` 位于同一目录下

---

## 📖 使用说明

### ▶ 启动监控

* 运行程序后点击 **“开始”** 按钮
* 建议 **以管理员身份运行**，以捕获高权限窗口（如任务管理器）的输入

### 🔍 日志过滤

* 在界面右侧或底部筛选栏中
* 从下拉列表中勾选特定 **窗口名称**
* 实时流仅显示对应窗口下的活动记录

### 🎨 界面定制

* 编辑根目录下的 `style.css`
* 保存并重启程序后，新样式立即生效

### 📤 日志导出

* 所有记录将自动保存在程序运行目录下的日志文件中

---

## ⚠️ 注意事项与免责声明

### 权限说明

* Windows 安全机制可能限制普通权限程序监听高权限进程
* 请使用 **管理员权限** 运行本工具

### 安全提示

* 由于使用了全局钩子技术
* 部分杀毒软件可能产生误报
* 请仅在 **可信环境** 下使用

### 合规性声明

* 本工具仅用于：

  * 技术交流
  * 工作流分析
  * 辅助调试
* **严禁** 用于非法监控或侵犯他人隐私
* 开发者对任何滥用行为不承担责任

---

## 📜 许可证

本项目基于 **MIT License** 开源。
